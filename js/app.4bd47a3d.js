(function(){"use strict";var e={9761:function(e,t,a){var n=a(3751),o=a(641);function r(e,t,a,n,r,i){const s=(0,o.g2)("SideBar"),l=(0,o.g2)("router-view"),d=(0,o.g2)("v-main"),c=(0,o.g2)("LoadingOverlay"),u=(0,o.g2)("v-app");return(0,o.uX)(),(0,o.Wv)(u,null,{default:(0,o.k6)((()=>[(0,o.bF)(s),(0,o.bF)(d,null,{default:(0,o.k6)((()=>[(0,o.bF)(l,{onLoading:i.setLoading},null,8,["onLoading"])])),_:1}),(0,o.bF)(c,{show:r.isLoading},null,8,["show"])])),_:1})}var i=a(33);function s(e,t,a,n,r,s){const l=(0,o.g2)("v-icon"),d=(0,o.g2)("v-list-item-title"),c=(0,o.g2)("v-list-item"),u=(0,o.g2)("v-list"),p=(0,o.g2)("v-navigation-drawer");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.bF)(p,{app:"",width:"260",class:"sidebar"},{default:(0,o.k6)((()=>[(0,o.bF)(u,null,{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.items,((e,t)=>((0,o.uX)(),(0,o.Wv)(c,{key:t,to:e.route,exact:"",tag:"router-link"},{prepend:(0,o.k6)((()=>[(0,o.bF)(l,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,i.v_)(e.icon),1)])),_:2},1024)])),default:(0,o.k6)((()=>[(0,o.bF)(d,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,i.v_)(e.text),1)])),_:2},1024)])),_:2},1032,["to"])))),128))])),_:1})])),_:1})])}var l={data(){return{items:[{text:"Home",icon:"mdi-home",route:"/"},{text:"Financial Performance",icon:"mdi-cash",route:"/financial"},{text:"Market Analysis",icon:"mdi-chart-bubble",route:"/marketanalysis"},{text:"Market Adoption",icon:"mdi-chart-line",route:"/adoptionrate"},{text:"Providers",icon:"mdi-hospital-building",route:"/providers"}]}}},d=a(6262);const c=(0,d.A)(l,[["render",s],["__scopeId","data-v-745bc117"]]);var u=c;const p={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-white bg-opacity-70"};function h(e,t,a,n,r,i){return a.show?((0,o.uX)(),(0,o.CE)("div",p,t[0]||(t[0]=[(0,o.Lk)("div",{class:"spinner"},null,-1),(0,o.Lk)("span",{class:"ml-4 text-xl font-semibold text-gray-700"},"Loading Data...",-1)]))):(0,o.Q3)("",!0)}var g={name:"LoadingOverlay",props:{show:{type:Boolean,required:!0}}};const b=(0,d.A)(g,[["render",h],["__scopeId","data-v-02f225fa"]]);var v=b,f={name:"App",components:{SideBar:u,LoadingOverlay:v},data(){return{isLoading:!1}},methods:{setLoading(e){this.isLoading=e}}};const m=(0,d.A)(f,[["render",r]]);var k=m,y=a(810),_=a(5220);const L={class:"home-view"},C={class:"dashboard-grid"},x={class:"card-wrapper"},w={key:0,class:"mini-spinner"},F={class:"card-wrapper"},P={key:0,class:"mini-spinner"},M={class:"card-wrapper"},A={key:0,class:"mini-spinner"};function S(e,t,a,n,r,i){const s=(0,o.g2)("DashboardCard");return(0,o.uX)(),(0,o.CE)("div",L,[t[0]||(t[0]=(0,o.Lk)("h1",null,"Welcome to the iDMasDR Dashboard",-1)),(0,o.Lk)("div",C,[(0,o.Lk)("div",x,[r.loadingScreens?((0,o.uX)(),(0,o.CE)("div",w)):((0,o.uX)(),(0,o.Wv)(s,{key:1,icon:"ðŸ§ª",title:"Total Screenings done",value:r.totalScreenings},null,8,["value"]))]),(0,o.Lk)("div",F,[r.loadingHospitals?((0,o.uX)(),(0,o.CE)("div",P)):((0,o.uX)(),(0,o.Wv)(s,{key:1,icon:"ðŸ¥",title:"Hospitals Partnered",value:r.hospitalsPartnered},null,8,["value"]))]),(0,o.bF)(s,{icon:"ðŸ’°",title:"Total Revenue",value:"$3.8M"}),(0,o.Lk)("div",M,[r.loadingPatients?((0,o.uX)(),(0,o.CE)("div",A)):((0,o.uX)(),(0,o.Wv)(s,{key:1,icon:"ðŸ‘¨â€âš•ï¸",title:"Patients Treated",value:r.patientsScreened},null,8,["value"]))])]),t[1]||(t[1]=(0,o.Lk)("div",{class:"highlights-box"},[(0,o.Lk)("h2",null,"ðŸ“Œ Recent Highlights"),(0,o.Lk)("li",null,"ðŸ“ Signed 3 new hospitals in Q2"),(0,o.Lk)("li",null,"ðŸšš Shipped 1,200 kits to Jakarta"),(0,o.Lk)("li",null,"ðŸ“ˆ Revenue increased by 8% in March")],-1))])}var E=a(4335);const D={class:"dashboard-card"},I={class:"icon"},V={class:"value"},X={key:0,class:"mini-spinner"},$={key:1},z={class:"title"};function R(e,t,a,n,r,s){return(0,o.uX)(),(0,o.CE)("div",D,[(0,o.Lk)("div",I,(0,i.v_)(a.icon),1),(0,o.Lk)("div",V,[a.loading?((0,o.uX)(),(0,o.CE)("div",X)):((0,o.uX)(),(0,o.CE)("strong",$,(0,i.v_)(a.value),1))]),(0,o.Lk)("div",z,(0,i.v_)(a.title),1)])}var T={name:"DashboardCard",props:{icon:String,title:String,value:[String,Number],loading:{type:Boolean,default:!1}}};const W=(0,d.A)(T,[["render",R],["__scopeId","data-v-3f85b2f3"]]);var O=W,Y={name:"HomeView",components:{DashboardCard:O},data(){return{hospitalsPartnered:0,patientsScreened:0,totalScreenings:0,loadingHospitals:!0,loadingPatients:!0,loadingScreens:!0}},methods:{async fetchStatistics(){E.A.get("https://bt4103-group17-dashboard-flask-be.onrender.com/providers/total_worked_with").then((e=>{this.hospitalsPartnered=e.data.total_providers_worked_with})).catch((e=>console.error(e))).finally((()=>{this.loadingHospitals=!1})),E.A.get("https://bt4103-group17-dashboard-flask-be.onrender.com/screenings/total_patients_screened").then((e=>{this.patientsScreened=e.data.unique_patient_count})).catch((e=>console.error(e))).finally((()=>{this.loadingPatients=!1})),E.A.get("https://bt4103-group17-dashboard-flask-be.onrender.com/screenings/total_screenings").then((e=>{this.totalScreenings=e.data.total_screenings})).catch((e=>console.error(e))).finally((()=>{this.loadingScreens=!1}))}},mounted(){this.fetchStatistics()}};const B=(0,d.A)(Y,[["render",S],["__scopeId","data-v-d0b33126"]]);var U=B;const j={class:"financial-performance-view"};function K(e,t,a,n,r,i){const s=(0,o.g2)("ProfitMarginChart"),l=(0,o.g2)("AnnualGrowthChart");return(0,o.uX)(),(0,o.CE)("div",j,[t[0]||(t[0]=(0,o.Lk)("h2",null,"Profit Margin Breakdown",-1)),(0,o.bF)(s),t[1]||(t[1]=(0,o.Lk)("h2",{style:{"margin-top":"60px"}},"Annual Revenue vs Operational Costs",-1)),(0,o.bF)(l)])}const G={key:0,class:"spinner-wrapper"},N={id:"profitChart"};function H(e,t,a,r,i,s){return(0,o.uX)(),(0,o.CE)("div",null,[i.loading?((0,o.uX)(),(0,o.CE)("div",G,t[0]||(t[0]=[(0,o.Lk)("div",{class:"spinner"},null,-1),(0,o.Lk)("p",null,"Loading...",-1)]))):(0,o.Q3)("",!0),(0,o.bo)((0,o.Lk)("canvas",N,null,512),[[n.aG,!i.loading]])])}a(4114),a(8111),a(116);var q=a(6118),J=a(9203);q.t1.register(...q.$L,J.A);var Q={name:"ProfitMarginChart",data(){return{loading:!0}},async mounted(){const e=document.getElementById("profitChart");try{const[t,a]=await Promise.all([E.A.get("https://bt4103-group17-dashboard-flask-be.onrender.com/costing_projections"),E.A.get("https://bt4103-group17-dashboard-flask-be.onrender.com/costing_projections")]),n=t.data,o=a.data,r=["Singapore","Malaysia","Thailand","Vietnam","Indonesia"],i=[],s=[],l=[],d=[];for(const e of r){const t=n.find((t=>t.country===e)),a=o.find((t=>t.country===e));if(!t||!a)continue;const r=t.revenue/1e3,c=a.total_cost/1e3,u=(r-c)/r*100;i.push(e),s.push(r),l.push(c),d.push(+u.toFixed(2))}new q.t1(e,{data:{labels:i,datasets:[{type:"line",label:"Profit Margin (%)",data:d,borderColor:"#4CAF50",backgroundColor:"#4CAF50",yAxisID:"y1",pointRadius:5,borderWidth:3,clip:!1,datalabels:{display:!0,align:"top",anchor:"end",color:"#4CAF50",font:{weight:"bold",size:14},formatter:e=>`${e}%`}},{type:"bar",label:"Revenue",data:s,backgroundColor:"#2196F3",yAxisID:"y",barPercentage:1},{type:"bar",label:"Cost",data:l,backgroundColor:"#F44336",yAxisID:"y",barPercentage:1}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Country-Wise Revenue, Cost, and Profit Margin",font:{size:20,weight:"bold"},padding:{top:10,bottom:40}},legend:{position:"bottom",labels:{font:{size:14},boxWidth:20}},tooltip:{callbacks:{label:function(e){const t=e.dataset.label,a=e.formattedValue;return t.includes("Margin")?`${t}: ${a}%`:`${t}: $${a}K`}},backgroundColor:"#222",titleFont:{size:14,weight:"bold"},bodyFont:{size:13},cornerRadius:6},datalabels:{display:!1}},scales:{x:{stacked:!1,ticks:{font:{size:13}},grid:{display:!1}},y:{stacked:!1,beginAtZero:!0,title:{display:!0,text:"Amount ($K)",font:{size:14}},ticks:{font:{size:12}},grid:{color:"#eee"}},y1:{position:"right",beginAtZero:!1,title:{display:!0,text:"Profit Margin (%)",font:{size:14}},ticks:{font:{size:12},callback:e=>`${e}%`},grid:{drawOnChartArea:!1}}}}}),this.loading=!1}catch(t){console.error("Failed to load chart data:",t),this.loading=!1}}};const Z=(0,d.A)(Q,[["render",H],["__scopeId","data-v-47f24e82"]]);var ee=Z;const te={key:0,class:"spinner-wrapper"},ae={id:"growthChart"};function ne(e,t,a,r,i,s){return(0,o.uX)(),(0,o.CE)("div",null,[i.loading?((0,o.uX)(),(0,o.CE)("div",te,t[0]||(t[0]=[(0,o.Lk)("div",{class:"spinner"},null,-1),(0,o.Lk)("p",null,"Loading...",-1)]))):(0,o.Q3)("",!0),(0,o.bo)((0,o.Lk)("canvas",ae,null,512),[[n.aG,!i.loading]])])}q.t1.register(...q.$L);var oe={name:"AnnualGrowthChart",data(){return{loading:!0}},async mounted(){const e=document.getElementById("growthChart");try{const t=await E.A.get("https://bt4103-group17-dashboard-flask-be.onrender.com/costing_projections"),a=t.data;let n=0,o=0;for(const e of a)n+=e.revenue||0,o+=e.total_cost||0;n/=1e6,o/=1e6;const r=[+n.toFixed(2)],i=[+o.toFixed(2)];for(let e=1;e<5;e++)r.push(+(1.15*r[e-1]).toFixed(2)),i.push(+(1.15*i[e-1]).toFixed(2));new q.t1(e,{type:"line",data:{labels:["Y1","Y2","Y3","Y4","Y5"],datasets:[{label:"Annual Revenue",data:r,borderColor:"#2196F3",backgroundColor:"#2196F3",tension:.4,pointRadius:5,fill:!1},{label:"Operational Costs",data:i,borderColor:"#F44336",backgroundColor:"#F44336",tension:.4,pointRadius:5,fill:!1}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Global Annual Revenue vs Operational Costs",font:{size:20,weight:"bold"},padding:{top:10,bottom:20}},legend:{position:"bottom",labels:{font:{size:14},boxWidth:20}},tooltip:{callbacks:{label:function(e){return`${e.dataset.label}: $${e.formattedValue}M`}}}},scales:{x:{ticks:{font:{size:13}},grid:{display:!1}},y:{beginAtZero:!0,title:{display:!0,text:"Amount ($M)",font:{size:14}},ticks:{font:{size:12},callback:function(e){return`$${e}M`}}}}}}),this.loading=!1}catch(t){console.error("Failed to load chart data:",t),this.loading=!1}}};const re=(0,d.A)(oe,[["render",ne],["__scopeId","data-v-afaabde6"]]);var ie=re,se={name:"FinancialPerformanceView",components:{ProfitMarginChart:ee,AnnualGrowthChart:ie}};const le=(0,d.A)(se,[["render",K],["__scopeId","data-v-ad054c54"]]);var de=le;const ce={class:"adoption-rate-container"},ue={class:"section-header"},pe={class:"year-selector"},he=["value"],ge={class:"chart-wrapper"},be={key:0,ref:"chartRef",style:{height:"500px"}},ve={key:1};function fe(e,t,a,r,s,l){const d=(0,o.g2)("TooltipInfo");return(0,o.uX)(),(0,o.CE)("div",ce,[(0,o.Lk)("h1",ue,[t[2]||(t[2]=(0,o.eW)(" Regional Kit Adoption Rates ")),(0,o.bF)(d,{text:"(Number of New Active Users / Total Sign-ups or Total Users) * 100"})]),(0,o.Lk)("div",pe,[t[3]||(t[3]=(0,o.Lk)("label",{for:"year"},[(0,o.Lk)("b",null,"Selected Year")],-1)),t[4]||(t[4]=(0,o.eW)()),t[5]||(t[5]=(0,o.Lk)("div",null,null,-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.selectedYear=e),onChange:t[1]||(t[1]=(...e)=>l.filterDataByYear&&l.filterDataByYear(...e))},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.availableYears,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,i.v_)(e),9,he)))),128))],544),[[n.u1,s.selectedYear]])]),(0,o.Lk)("div",ge,[s.loaded?((0,o.uX)(),(0,o.CE)("canvas",be,null,512)):((0,o.uX)(),(0,o.CE)("div",ve,"Loading..."))])])}a(2489),a(7588),a(1701),a(7642),a(8004),a(3853),a(5876),a(2475),a(5024),a(1698);const me={class:"tooltip-wrapper"},ke={class:"tooltip-text"};function ye(e,t,a,n,r,s){return(0,o.uX)(),(0,o.CE)("span",me,[t[0]||(t[0]=(0,o.eW)(" â„¹ï¸ ")),(0,o.Lk)("span",ke,(0,i.v_)(a.text),1)])}var _e={name:"TooltipInfo",props:{text:{type:String,required:!0}}};const Le=(0,d.A)(_e,[["render",ye],["__scopeId","data-v-654e4136"]]);var Ce=Le;q.t1.register(q.hE,q.m_,q.s$,q.No,q.kc,q.PP,q.FN);var xe={name:"AdoptionRateView",components:{TooltipInfo:Ce},data(){return{loaded:!1,chart:null,selectedYear:"",availableYears:[],rawLabels:[],rawDatasets:[],chartData:null,chartOptions:{responsive:!0,maintainAspectRatio:!1,layout:{padding:{top:60,right:20,bottom:40,left:20}},plugins:{legend:{position:"top",padding:20},title:{display:!0,text:"Regional Kit Adoption Rates (%)",padding:20},tooltip:{enabled:!0}},scales:{y:{beginAtZero:!0,max:100,suggestedMax:100,title:{display:!0,text:"Adoption Rate (%)"},grid:{drawTicks:!1,borderDash:[5,5]}},x:{title:{display:!0,text:"Month"},grid:{display:!1}}}}}},mounted(){this.fetchAdoptionData()},methods:{async fetchAdoptionData(){this.loaded=!1;try{const e=await E.A.get("https://bt4103-group17-dashboard-flask-be.onrender.com/adoption-rates"),{labels:t,datasets:a}=e.data;this.rawLabels=t,this.rawDatasets=a;const n=new Set;t.forEach((e=>n.add(e.split("-")[0]))),this.availableYears=Array.from(n).sort(),this.selectedYear||(this.selectedYear=this.availableYears[0]),this.filterDataByYear()}catch(e){console.error("Error fetching adoption rate data:",e),this.loaded=!1}},filterDataByYear(){const e=this.rawLabels.filter((e=>e.startsWith(this.selectedYear))),t=this.rawDatasets.map((e=>({label:e.label,data:this.rawLabels.map(((t,a)=>t.startsWith(this.selectedYear)?0===e.data[a]?null:e.data[a]:null)).filter(((e,t)=>this.rawLabels[t].startsWith(this.selectedYear)))})));this.chartData={labels:e,datasets:t},this.loaded=!0,this.$nextTick((()=>{const e=this.$refs.chartRef;if(!e)return;const t=e.getContext("2d");this.chart&&this.chart.destroy(),this.chart=new q.t1(t,{type:"line",data:this.chartData,options:this.chartOptions})}))}},beforeUnmount(){this.chart&&this.chart.destroy()}};const we=(0,d.A)(xe,[["render",fe],["__scopeId","data-v-875e730e"]]);var Fe=we;const Pe={class:"section-header"};function Me(e,t,a,n,r,i){const s=(0,o.g2)("TooltipInfo"),l=(0,o.g2)("v-text-field"),d=(0,o.g2)("v-data-table");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("h1",Pe,[t[1]||(t[1]=(0,o.eW)(" Healthcare Providers ")),(0,o.bF)(s,{text:"This view shows all medical facilities onboarded into the system and their current negotiation or onboarding stage."})]),(0,o.bF)(l,{modelValue:r.search,"onUpdate:modelValue":t[0]||(t[0]=e=>r.search=e),label:"Search Providers",class:"mx-4"},null,8,["modelValue"]),(0,o.bF)(d,{headers:r.headers,items:r.providers,class:"elevation-1",search:r.search},null,8,["headers","items","search"]),t[2]||(t[2]=(0,o.Lk)("h2",{class:"mt-10 text-center"},"Onboarding Funnel",-1)),t[3]||(t[3]=(0,o.Lk)("div",{class:"chart-container"},[(0,o.Lk)("canvas",{id:"funnelChart"})],-1))])}a(8237);var Ae=a(7154),Se=a(4680);Ae.t1.register(J.A),Ae.t1.register(Se.Ld,Se.x4);var Ee={name:"ProvidersView",components:{TooltipInfo:Ce},data(){return{search:"",providers:[],headers:[{title:"ID",key:"provider_id"},{title:"Name",key:"provider_name"},{title:"Type",key:"provider_type"},{title:"Address",key:"address"},{title:"City",key:"city"},{title:"State/Region",key:"state_region"},{title:"Country",key:"country"},{title:"Onboarding Stage",key:"onboarding_stage"},{title:"First Login",key:"first_login"},{title:"Last Usage",key:"last_active"}]}},mounted(){this.fetchProviders(),this.fetchFunnelSummary()},methods:{async fetchProviders(){try{const e=await E.A.get("https://bt4103-group17-dashboard-flask-be.onrender.com/providers");this.providers=e.data}catch(e){console.error("Error fetching providers:",e)}},async fetchFunnelSummary(){try{const e=await E.A.get("https://bt4103-group17-dashboard-flask-be.onrender.com/providers?view=summary"),t=e.data,a=["not_contacted","contacted","demo_scheduled","demo_done","trial_started","trial_ended","contract_signed"],n={not_contacted:"Not Contacted",contacted:"Contacted",demo_scheduled:"Demo Scheduled",demo_done:"Demo Completed",trial_started:"Trial Started",trial_ended:"Trial Ended",contract_signed:"Contract Signed"},o={not_contacted:"#76c7c0",contacted:"#f4a261",demo_scheduled:"#e76f51",demo_done:"#2a9d8f",trial_started:"#264653",trial_ended:"#8ecae6",contract_signed:"#ffb703"},r=a.map((e=>{const a=t.find((t=>t.stage===e));return{stage:e,label:n[e],value:a?a.total:0,color:o[e]}}));this.renderFunnelChart(r)}catch(e){console.error("Error fetching funnel summary:",e)}},renderFunnelChart(e){const t=document.getElementById("funnelChart").getContext("2d");this.funnelChart&&this.funnelChart.destroy();const a=e.reduce(((e,t)=>e+t.value),0)||1,n=e.map((e=>{const t=(e.value/a*100).toFixed(1);return`${e.label}\n${t}%`}));this.funnelChart=new Ae.t1(t,{type:"funnel",data:{labels:n,datasets:[{label:"Onboarding Funnel",data:e.map((e=>e.value)),backgroundColor:e.map((e=>e.color))}]},options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:{top:30,bottom:30,left:30,right:30}},plugins:{legend:{display:!1},title:{display:!1},tooltip:{callbacks:{label:function(e){const t=e.raw,n=(t/a*100).toFixed(1);return`${t} providers (${n}%)`}}},datalabels:{color:"black",font:{size:12,weight:"bold"},formatter:function(t,n){const o=e[n.dataIndex].label,r=(t/a*100).toFixed(1);return`${o}\n${r}%`},align:"end",anchor:"end",clamp:!0}},elements:{trapezoid:{borderColor:"white",borderWidth:1}}}})}}};const De=(0,d.A)(Ee,[["render",Me]]);var Ie=De;const Ve={class:"market-analysis-view"};function Xe(e,t,a,n,r,i){const s=(0,o.g2)("MarketOverview"),l=(0,o.g2)("MarketSizingFunnel"),d=(0,o.g2)("PricingModel");return(0,o.uX)(),(0,o.CE)("div",Ve,[(0,o.bF)(s),(0,o.bF)(l),(0,o.bF)(d)])}const $e={class:"market-view"},ze={key:0,class:"spinner-wrapper"},Re={id:"marketBubbleChart"};function Te(e,t,a,r,i,s){return(0,o.uX)(),(0,o.CE)("div",$e,[t[1]||(t[1]=(0,o.Lk)("h2",null," Country-Wise Market Analysis: Diabetic Population, GDP per Capita (PPP), Digital Adoption Index ",-1)),i.loading?((0,o.uX)(),(0,o.CE)("div",ze,t[0]||(t[0]=[(0,o.Lk)("div",{class:"spinner"},null,-1),(0,o.Lk)("p",null,"Loading Chart...",-1)]))):(0,o.Q3)("",!0),(0,o.bo)((0,o.Lk)("canvas",Re,null,512),[[n.aG,!i.loading]])])}var We=a(5638);q.t1.register(...q.$L,J.A,We.A);var Oe={name:"MarketOverview",data(){return{chart:null,loading:!0,colorMap:{Singapore:"#4CAF50",Malaysia:"#2196F3",Vietnam:"#FFC107",Thailand:"#9C27B0",Indonesia:"#F44336"}}},methods:{scaleRadius(e){return Math.sqrt(e)/60},originalPop(e){return Math.round((60*e)**2)},async drawChart(){try{const e=await E.A.get("https://bt4103-group17-dashboard-flask-be.onrender.com/countries"),t=e.data,a=document.getElementById("marketBubbleChart");if(!a)return;const n=["Vietnam","Indonesia","Thailand","Malaysia","Singapore"],o=n.map((e=>{const a=t.find((t=>t.country===e));if(!a)return null;const n=a.diabetic_metillus_population;return{label:a.country,data:[{x:a.ppp,y:a.dai,r:Math.max(this.scaleRadius(n),5)}],backgroundColor:this.colorMap[a.country]||"#90A4AE",datalabels:{color:"Singapore"===a.country?"#000000":"#ffffff",font:{size:16,weight:"bold"}}}})).filter(Boolean);this.chart=new q.t1(a,{type:"bubble",data:{datasets:o},options:{responsive:!0,plugins:{title:{display:!0,text:"Key Market Information by Country",font:{size:20,weight:"bold"}},legend:{position:"bottom",labels:{font:{size:16},boxWidth:20}},tooltip:{callbacks:{label:e=>{const{x:t,y:a,r:n}=e.raw,o=e.dataset.label,r=this.originalPop(n);return`${o}: GDP per capita $${t.toLocaleString()}, DAI ${a}, Diabetic Population: ${r.toLocaleString()}`}}},datalabels:{formatter:e=>{const t=this.originalPop(e.r);return t>=1e6?`${(t/1e6).toFixed(1)}M`:`${(t/1e3).toFixed(0)}K`}},annotation:{annotations:{incomeThreshold:{type:"line",scaleID:"x",value:47727,borderColor:"gray",borderDash:[6,6],borderWidth:1,label:{display:!0,content:"Average GDP per capita: $47,727",position:"start",font:{style:"italic",size:14}}},daiThreshold:{type:"line",scaleID:"y",value:.66,borderColor:"gray",borderDash:[6,6],borderWidth:1,label:{display:!0,content:"Average DAI: 0.66",position:"end",font:{style:"italic",size:14}}}}}},scales:{x:{min:0,max:15e4,title:{display:!0,text:"GDP per Capita, PPP (USD)",font:{size:18}},ticks:{stepSize:37500,font:{size:12}},grid:{color:"#eee"}},y:{min:.35,max:.9,title:{display:!0,text:"Digital Adoption Index (DAI)",font:{size:18}},ticks:{stepSize:.25,font:{size:12}},grid:{color:"#eee"}}}},plugins:[J.A]})}catch(e){console.error("Failed to load chart data:",e)}finally{this.loading=!1}}},mounted(){this.drawChart()}};const Ye=(0,d.A)(Oe,[["render",Te],["__scopeId","data-v-601d8043"]]);var Be=Ye;const Ue={style:{"margin-top":"60px"}},je={class:"funnel-title"},Ke={key:0,class:"funnel-loading"},Ge={key:1},Ne={class:"funnel-header-top-left"},He={class:"dropdown-wrapper inline"},qe=["value"],Je={class:"revenue-annotation"},Qe={class:"revenue-text"};function Ze(e,t,a,r,s,l){const d=(0,o.g2)("apexchart");return(0,o.uX)(),(0,o.CE)("div",Ue,[(0,o.Lk)("h2",je,"Market Sizing Funnel â€“ "+(0,i.v_)(s.selectedFunnelMarket),1),s.loading?((0,o.uX)(),(0,o.CE)("div",Ke,t[1]||(t[1]=[(0,o.Lk)("div",{class:"spinner"},null,-1),(0,o.Lk)("p",null,"Loading funnel data...",-1)]))):((0,o.uX)(),(0,o.CE)("div",Ge,[(0,o.Lk)("div",Ne,[(0,o.Lk)("div",He,[t[2]||(t[2]=(0,o.Lk)("label",{for:"market-select"},"Market:",-1)),(0,o.bo)((0,o.Lk)("select",{id:"market-select","onUpdate:modelValue":t[0]||(t[0]=e=>s.selectedFunnelMarket=e),class:"dropdown"},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.funnelMarkets,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,i.v_)(e),9,qe)))),128))],512),[[n.u1,s.selectedFunnelMarket]])])]),(0,o.bF)(d,{type:"bar",height:"400",options:s.funnelOptions,series:s.funnelSeries},null,8,["options","series"]),t[4]||(t[4]=(0,o.Lk)("div",{class:"revenue-connector"},[(0,o.Lk)("div",{class:"line"}),(0,o.Lk)("svg",{height:"30",width:"30",viewBox:"0 0 24 24",fill:"#2196F3"},[(0,o.Lk)("path",{d:"M12 2v14.17l-4.59-4.58L6 13l6 6 6-6-1.41-1.41L12 16.17V2z"})])],-1)),(0,o.Lk)("div",Je,[(0,o.Lk)("div",Qe,[t[3]||(t[3]=(0,o.Lk)("strong",null,"Revenue Potential: $",-1)),(0,o.eW)(" "+(0,i.v_)(l.formattedRevenue),1)])])]))])}var et=a(5564),tt={name:"MarketSizingFunnel",components:{apexchart:et.A},data(){return{selectedFunnelMarket:"",funnelMarkets:[],funnelDataMap:{},revenueText:{},funnelSeries:[],loading:!0,funnelOptions:{chart:{type:"bar",height:400},plotOptions:{bar:{borderRadius:4,horizontal:!0,barHeight:"70%",isFunnel:!0}},dataLabels:{enabled:!0,formatter:function(e,t){const a=t.w.globals.labels[t.dataPointIndex],n=t.w.config.series[0].data,o=n[0],r=(e/o*100).toFixed(1),i=e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toLocaleString();return`${a}: ${r}% (${i})`},style:{fontSize:"14px",fontWeight:"600",colors:["#000"]},offsetX:0,textAnchor:"middle",distributed:!0,background:{enabled:!1}},xaxis:{categories:["Total Population","Diabetic Population","VTDR Cases","Target Population (Customers)"],labels:{formatter:e=>e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toLocaleString()}},fill:{colors:["#2196F3","#42A5F5","#64B5F6","#90CAF9"]},title:{text:"",align:"center"},legend:{show:!1}}}},computed:{formattedRevenue(){const e=this.revenueText[this.selectedFunnelMarket];return!e||isNaN(e)?"-":e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toLocaleString()}},watch:{selectedFunnelMarket(e){this.updateChartData(e)}},methods:{async fetchCountryData(){this.loading=!0;try{const e=await E.A.get("https://bt4103-group17-dashboard-flask-be.onrender.com/countries"),t=e.data,a={},n=[];t.forEach((e=>{a[e.country]=[e.total_population,e.total_population*e.diabetes_mellitus_prevalence_rate,e.diabetic_metillus_population*e.vtdr_prevalence_rate_among_diabetics,e.diabetic_metillus_population*e.vtdr_prevalence_rate_among_diabetics*.8],n.push(e.country),this.revenueText[e.country]=e.revenue})),this.funnelDataMap=a,this.funnelMarkets=n,this.funnelMarkets.includes(this.selectedFunnelMarket)||(this.selectedFunnelMarket=this.funnelMarkets[0]),this.updateChartData(this.selectedFunnelMarket)}catch(e){console.error("Error fetching country data:",e)}finally{this.loading=!1}},updateChartData(e){this.funnelDataMap[e]&&(this.funnelSeries=[{name:`Market Sizing (${e})`,data:this.funnelDataMap[e]}])}},mounted(){this.fetchCountryData()}};const at=(0,d.A)(tt,[["render",Ze],["__scopeId","data-v-375b526e"]]);var nt=at;const ot={style:{"margin-top":"60px"}},rt={style:{"margin-top":"20px",display:"flex","justify-content":"center",gap:"10px","flex-wrap":"wrap"}},it=["onClick"],st={key:0,style:{"margin-top":"20px","text-align":"center","font-size":"14px"}},lt={key:1,style:{"margin-top":"30px"}},dt={style:{"margin-bottom":"10px"}},ct={style:{"overflow-x":"auto"}},ut={style:{width:"100%","border-collapse":"collapse","font-size":"14px"}},pt={style:{"margin-top":"20px","text-align":"center"}},ht={style:{color:"red"}};function gt(e,t,a,r,s,l){return(0,o.uX)(),(0,o.CE)("div",ot,[t[14]||(t[14]=(0,o.Lk)("h2",null,"Pricing Model",-1)),(0,o.Lk)("div",rt,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=e=>l.selectMarket("Equation")),class:(0,i.C4)(["market-tab",{active:"Equation"===s.selectedMarket}])}," Equation ",2),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.inputParams,((e,t)=>((0,o.uX)(),(0,o.CE)("button",{key:t,onClick:e=>l.selectMarket(t),class:(0,i.C4)(["market-tab",{active:s.selectedMarket===t}])},(0,i.v_)(t),11,it)))),128))]),"Equation"===s.selectedMarket?((0,o.uX)(),(0,o.CE)("div",st,t[8]||(t[8]=[(0,o.Fv)("<div data-v-2b678840><strong data-v-2b678840>P = (V<sub data-v-2b678840>op</sub> + V<sub data-v-2b678840>tx</sub>) Ã— Î³</strong></div><p data-v-2b678840><strong data-v-2b678840>P</strong>: Final price</p><p data-v-2b678840><strong data-v-2b678840>V<sub data-v-2b678840>op</sub></strong>: Cs Ã— Ts Ã— Rr</p><p data-v-2b678840><strong data-v-2b678840>V<sub data-v-2b678840>tx</sub></strong>: Pd Ã— Pvt Ã— Vt</p><p data-v-2b678840><strong data-v-2b678840>Î³</strong>: Value capture rate</p>",5)]))):s.inputParams[s.selectedMarket]?((0,o.uX)(),(0,o.CE)("div",lt,[(0,o.Lk)("h4",dt,"Input Variables â€“ "+(0,i.v_)(s.selectedMarket),1),(0,o.Lk)("div",ct,[(0,o.Lk)("table",ut,[t[9]||(t[9]=(0,o.Lk)("thead",null,[(0,o.Lk)("tr",{style:{"background-color":"#f5f5f5"}},[(0,o.Lk)("th",null,"Cs"),(0,o.Lk)("th",null,"Ts"),(0,o.Lk)("th",null,"Rr"),(0,o.Lk)("th",null,"Pd"),(0,o.Lk)("th",null,"Pvt"),(0,o.Lk)("th",null,"Vt"),(0,o.Lk)("th",null,"Î³")])],-1)),(0,o.Lk)("tbody",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("td",null,[(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=e=>s.inputParams[s.selectedMarket].Cs=e)},null,512),[[n.Jo,s.inputParams[s.selectedMarket].Cs,void 0,{number:!0}]])]),(0,o.Lk)("td",null,[(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=e=>s.inputParams[s.selectedMarket].Ts=e),step:"0.01"},null,512),[[n.Jo,s.inputParams[s.selectedMarket].Ts,void 0,{number:!0}]])]),(0,o.Lk)("td",null,[(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=e=>s.inputParams[s.selectedMarket].Rr=e),step:"0.01"},null,512),[[n.Jo,s.inputParams[s.selectedMarket].Rr,void 0,{number:!0}]])]),(0,o.Lk)("td",null,[(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=e=>s.inputParams[s.selectedMarket].Pd=e),step:"0.01"},null,512),[[n.Jo,s.inputParams[s.selectedMarket].Pd,void 0,{number:!0}]])]),(0,o.Lk)("td",null,[(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=e=>s.inputParams[s.selectedMarket].Pvt=e),step:"0.01"},null,512),[[n.Jo,s.inputParams[s.selectedMarket].Pvt,void 0,{number:!0}]])]),(0,o.Lk)("td",null,[(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=e=>s.inputParams[s.selectedMarket].Vt=e)},null,512),[[n.Jo,s.inputParams[s.selectedMarket].Vt,void 0,{number:!0}]])]),(0,o.Lk)("td",null,[(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":t[7]||(t[7]=e=>s.inputParams[s.selectedMarket].gamma=e),step:"0.01"},null,512),[[n.Jo,s.inputParams[s.selectedMarket].gamma,void 0,{number:!0}]])])])])]),(0,o.Lk)("div",pt,[(0,o.Lk)("p",null,[t[10]||(t[10]=(0,o.Lk)("strong",null,[(0,o.eW)("V"),(0,o.Lk)("sub",null,"op"),(0,o.eW)(":")],-1)),(0,o.eW)(" "+(0,i.v_)(l.calcVop(s.selectedMarket).toFixed(2)),1)]),(0,o.Lk)("p",null,[t[11]||(t[11]=(0,o.Lk)("strong",null,[(0,o.eW)("V"),(0,o.Lk)("sub",null,"tx"),(0,o.eW)(":")],-1)),(0,o.eW)(" "+(0,i.v_)(l.calcVtx(s.selectedMarket).toFixed(2)),1)]),(0,o.Lk)("p",null,[t[12]||(t[12]=(0,o.Lk)("strong",null,"Final Price:",-1)),t[13]||(t[13]=(0,o.eW)()),(0,o.Lk)("span",ht,(0,i.v_)(l.calcFinalPrice(s.selectedMarket).toFixed(2)),1)])])])])):(0,o.Q3)("",!0)])}var bt={name:"PricingModel",data(){return{selectedMarket:"Malaysia",inputParams:{}}},methods:{selectMarket(e){this.selectedMarket=e},calcVop(e){const{Cs:t,Ts:a,Rr:n}=this.inputParams[e];return t*a*n},calcVtx(e){const{Pd:t,Pvt:a,Vt:n}=this.inputParams[e];return t*a*n},calcFinalPrice(e){const t=this.calcVop(e),a=this.calcVtx(e),n=this.inputParams[e].gamma;return(t+a)*n},async fetchInputParams(){try{const e=await E.A.get("https://bt4103-group17-dashboard-flask-be.onrender.com/countries"),t=e.data,a={};t.forEach((e=>{a[e.country]={Cs:e.cost_per_hour_specialist,Ts:e.time_taken_per_consult,Rr:e.referral_reduction_rate,Pd:e.diabetes_mellitus_prevalence_rate,Pvt:e.vtdr_prevalence_rate_among_diabetics,Vt:e.average_treatment_value_per_vtdr,gamma:e.dai}})),this.inputParams=a}catch(e){console.error("Failed to fetch country parameters:",e)}}},mounted(){this.fetchInputParams()}};const vt=(0,d.A)(bt,[["render",gt],["__scopeId","data-v-2b678840"]]);var ft=vt,mt={components:{MarketOverview:Be,MarketSizingFunnel:nt,PricingModel:ft}};const kt=(0,d.A)(mt,[["render",Xe],["__scopeId","data-v-6456f44e"]]);var yt=kt;const _t=[{path:"/",name:"home",component:U},{path:"/marketanalysis",name:"marketanalysis",component:yt},{path:"/financial",name:"financial",component:de},{path:"/adoptionrate",name:"adoptionrate",component:Fe},{path:"/providers",name:"providers",component:Ie}],Lt=(0,_.aE)({history:(0,_.LA)("/bt4103-group17-dashboard-fe/"),routes:_t});var Ct=Lt,xt=a(4825),wt=a(2938),Ft=a(3379);a(5524);const Pt=(0,xt.$N)({components:wt,directives:Ft,icons:{defaultSet:"mdi"}}),Mt=(0,n.Ef)(k),At=(0,y.Ey)();Mt.use(Pt),Mt.use(Ct),Mt.use(At),Mt.mount("#app")}},t={};function a(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(t,n,o,r){if(!n){var i=1/0;for(c=0;c<e.length;c++){n=e[c][0],o=e[c][1],r=e[c][2];for(var s=!0,l=0;l<n.length;l++)(!1&r||i>=r)&&Object.keys(a.O).every((function(e){return a.O[e](n[l])}))?n.splice(l--,1):(s=!1,r<i&&(i=r));if(s){e.splice(c--,1);var d=o();void 0!==d&&(t=d)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[n,o,r]}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,r,i=n[0],s=n[1],l=n[2],d=0;if(i.some((function(t){return 0!==e[t]}))){for(o in s)a.o(s,o)&&(a.m[o]=s[o]);if(l)var c=l(a)}for(t&&t(n);d<i.length;d++)r=i[d],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(c)},n=self["webpackChunkbt4103_group17_dashboard_fe"]=self["webpackChunkbt4103_group17_dashboard_fe"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],(function(){return a(9761)}));n=a.O(n)})();
//# sourceMappingURL=app.4bd47a3d.js.map